import{d as B,ab as E,r as l,a as _,K as M,y as p,A as t,e as r,f as w,I as x,a7 as k,E as o,v as b,J as y,F as P,B as F,ak as I,z as m,M as N,G as O,ae as j,_ as $}from"#entry";import{E as D}from"./DGLa76wj.js";import{s as u}from"./BgUjC9Yu.js";const J={class:"login-page"},R={action:"#",method:"post",class:"formContent"},U={class:"input_place"},z={class:"input_alert"},G={class:"input_place"},H={class:"input_alert"},K={for:"rememberLoginAcc",class:"remember"},q=["checked"],Q={class:"loginSelect"},W={class:"contactTryPlay"},X=["onClick"],Y=B({__name:"login",setup(Z){const i=E(),L=l(!0),a=l(""),n=l(""),g=l(!1),f=l(!1),T=_(()=>g.value?i.checkAcc(a.value):{type:0,isLegal:!0}),A=_(()=>f.value?i.checkPaw(n.value):{isLegal:!0}),d=l(!1),C=M([{text:"联系客服",action:()=>window.open("https://t.me/mmisharkk","_blank","noopener,noreferrer")},{text:"免费试玩",action:()=>u({message:"功能维护中",icon:"warning"})},{text:"忘记密码",action:()=>u({message:"重新注册吧",icon:"warning"})}]);async function V(){if(i.checkAcc(a.value)&&i.checkPaw(n.value)){d.value=!0;const v={username:a.value,password:n.value};try{const e=await fetch("https://hmajax.itheima.net/api/login",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(v)}),c=await e.json();if(!e.ok)throw new Error(c.message);u({message:"登陆成功",icon:"checked"}),i.loginSucess(a.value),j("/")}catch(e){u({message:e.message,icon:"clear"})}finally{d.value=!1}}}return(v,e)=>{const c=N,h=D,S=I;return m(),p("div",J,[t("main",null,[t("form",R,[e[7]||(e[7]=t("p",{class:"loginTypeText"},"支持邮箱/账号登陆",-1)),t("div",U,[r(h,{modelValue:o(a),"onUpdate:modelValue":e[0]||(e[0]=s=>k(a)?a.value=s:null),placeholder:"请输入邮箱/账号",maxlength:16,clearable:"",onFocusOnce:e[1]||(e[1]=s=>g.value=!0)},{prefix:x(()=>[r(c,{name:"contact"})]),_:1},8,["modelValue"]),w(t("p",z,[...e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-exclamation-circle-fill",viewBox:"0 0 16 16"},[t("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"})],-1),y(" 请输入邮箱/帐号 ",-1)])],512),[[b,!o(T).isLegal]])]),t("div",G,[r(h,{modelValue:o(n),"onUpdate:modelValue":e[2]||(e[2]=s=>k(n)?n.value=s:null),placeholder:"请输入密码",maxlength:16,clearable:"",type:"password","show-password":"",onFocusOnce:e[3]||(e[3]=s=>f.value=!0)},{prefix:x(()=>[r(c,{name:"lock"})]),_:1},8,["modelValue"]),w(t("p",H,[...e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-exclamation-circle-fill",viewBox:"0 0 16 16"},[t("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"})],-1),y(" 8-16位, 英文/数字/符号 ",-1)])],512),[[b,!o(A).isLegal]]),t("label",K,[t("input",{type:"checkbox",checked:o(L)},null,8,q),e[6]||(e[6]=t("span",null,"记住账号/密码",-1))])])]),r(S,{loading:o(d),text:"登陆",type:"primary",onClick:V},null,8,["loading"]),t("div",Q,[t("div",W,[(m(!0),p(P,null,F(o(C),s=>(m(),p("span",{key:s.text,onClick:s.action},O(s.text),9,X))),128))]),e[8]||(e[8]=t("div",{class:"thirdPartyLogin"},[t("span",null,"绑定登陆")],-1))])])])}}}),ae=$(Y,[["__scopeId","data-v-6a3abb3a"]]);export{ae as default};
