import{a as B,a1 as O,r as l,O as _,i as P,c as p,b as t,g as r,v as w,w as x,Y as b,u as o,x as k,h as y,F as E,e as F,ab as M,o as m,s as N,t as j,a5 as I,_ as $}from"./Dpf0kvGp.js";import{E as D}from"./C_nWEGGq.js";import{s as u}from"./CjgZe-uq.js";const R={class:"login-page"},U={action:"#",method:"post",class:"formContent"},H={class:"input_place"},J={class:"input_alert"},Y={class:"input_place"},q={class:"input_alert"},z={for:"rememberLoginAcc",class:"remember"},G=["checked"],K={class:"loginSelect"},Q={class:"contactTryPlay"},W=["onClick"],X=B({__name:"login",setup(Z){const i=O(),L=l(!0),a=l(""),n=l(""),g=l(!1),h=l(!1),T=_(()=>g.value?i.checkAcc(a.value):{type:0,isLegal:!0}),C=_(()=>h.value?i.checkPaw(n.value):{isLegal:!0}),d=l(!1),V=P([{text:"联系客服",action:()=>window.open("https://t.me/mmisharkk","_blank","noopener,noreferrer")},{text:"免费试玩",action:()=>u({message:"功能维护中",icon:"warning"})},{text:"忘记密码",action:()=>u({message:"重新注册吧",icon:"warning"})}]);async function A(){if(i.checkAcc(a.value)&&i.checkPaw(n.value)){d.value=!0;const v={username:a.value,password:n.value};try{const e=await fetch("https://hmajax.itheima.net/api/login",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(v)}),c=await e.json();if(!e.ok)throw new Error(c.message);u({message:"登陆成功",icon:"checked"}),i.loginSucess(a.value),I("/")}catch(e){u({message:e.message,icon:"clear"})}finally{d.value=!1}}}return(v,e)=>{const c=N,f=D,S=M;return m(),p("div",R,[t("main",null,[t("form",U,[e[7]||(e[7]=t("p",{class:"loginTypeText"},"支持邮箱/账号登陆",-1)),t("div",H,[r(f,{modelValue:o(a),"onUpdate:modelValue":e[0]||(e[0]=s=>b(a)?a.value=s:null),placeholder:"请输入邮箱/账号",maxlength:16,clearable:"",onFocusOnce:e[1]||(e[1]=s=>g.value=!0)},{prefix:x(()=>[r(c,{name:"contact"})]),_:1},8,["modelValue"]),w(t("p",J,[...e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-exclamation-circle-fill",viewBox:"0 0 16 16"},[t("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"})],-1),y(" 请输入邮箱/帐号 ",-1)])],512),[[k,!o(T).isLegal]])]),t("div",Y,[r(f,{modelValue:o(n),"onUpdate:modelValue":e[2]||(e[2]=s=>b(n)?n.value=s:null),placeholder:"请输入密码",maxlength:16,clearable:"",type:"password","show-password":"",onFocusOnce:e[3]||(e[3]=s=>h.value=!0)},{prefix:x(()=>[r(c,{name:"lock"})]),_:1},8,["modelValue"]),w(t("p",q,[...e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-exclamation-circle-fill",viewBox:"0 0 16 16"},[t("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"})],-1),y(" 8-16位, 英文/数字/符号 ",-1)])],512),[[k,!o(C).isLegal]]),t("label",z,[t("input",{type:"checkbox",checked:o(L)},null,8,G),e[6]||(e[6]=t("span",null,"记住账号/密码",-1))])])]),r(S,{loading:o(d),text:"登陆",type:"primary",onClick:A},null,8,["loading"]),t("div",K,[t("div",Q,[(m(!0),p(E,null,F(o(V),s=>(m(),p("span",{key:s.text,onClick:s.action},j(s.text),9,W))),128))]),e[8]||(e[8]=t("div",{class:"thirdPartyLogin"},[t("span",null,"绑定登陆")],-1))])])])}}}),ae=$(X,[["__scopeId","data-v-6a3abb3a"]]);export{ae as default};
