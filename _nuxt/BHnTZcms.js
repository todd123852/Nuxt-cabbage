import{d as B,aa as A,r as i,a as _,N as P,ak as g,z as m,D as t,e as r,f as w,K as x,a8 as k,B as n,v as y,M as b,F as E,E as M,al as N,C as v,O,J as F,ad as R,_ as j}from"#entry";import{E as D}from"./BwkBuE_-.js";const I={class:"loginRegistPage"},$={action:"#",method:"post",class:"formContent"},J={class:"input_place"},U={class:"input_alert"},z={class:"input_place"},H={class:"input_alert"},K={class:"loginSelect"},q={class:"contactTryPlay"},G=["onClick"],Q=B({__name:"regist",setup(W){const l=A(),s=i(""),o=i(""),u=i(!1),d=i(!1),C=_(()=>u.value?l.checkAcc(s.value):{type:0,isLegal:!0}),L=_(()=>d.value?l.checkPaw(o.value):{isLegal:!0}),p=i(!1);async function T(){if(u.value=d.value=!0,l.checkAcc(s.value).isLegal&&l.checkPaw(o.value).isLegal){p.value=!0;const f={username:s.value,password:o.value};try{const e=await fetch("https://hmajax.itheima.net/api/register",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(f)}),c=await e.json();if(!e.ok)throw new Error(c.message);l.loginSucess(s.value),g({message:"注册成功",icon:"checked"}),R("/")}catch(e){g({message:e.message,icon:"clear"})}finally{p.value=!1}}}const S=P([{text:"联系客服",action:()=>window.open("https://t.me/mmisharkk","_blank","noopener,noreferrer")},{text:"免费试玩",action:()=>g({message:"功能维护中",icon:"warning"})}]);return(f,e)=>{const c=O,h=D,V=N;return v(),m("div",I,[t("main",null,[t("form",$,[e[6]||(e[6]=t("p",{class:"loginTypeText"},"支持邮箱/账号注册",-1)),t("div",J,[r(h,{modelValue:n(s),"onUpdate:modelValue":e[0]||(e[0]=a=>k(s)?s.value=a:null),placeholder:"请输入邮箱/账号",minlength:4,maxlength:16,clearable:"",onFocusOnce:e[1]||(e[1]=a=>u.value=!0)},{prefix:x(()=>[r(c,{name:"contact"})]),_:1},8,["modelValue"]),w(t("p",U,[...e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-exclamation-circle-fill",viewBox:"0 0 16 16"},[t("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"})],-1),b(" 请输入邮箱/帐号 ",-1)])],512),[[y,!n(C).isLegal]])]),t("div",z,[r(h,{modelValue:n(o),"onUpdate:modelValue":e[2]||(e[2]=a=>k(o)?o.value=a:null),placeholder:"请输入密码",maxlength:16,clearable:"",onFocusOnce:e[3]||(e[3]=a=>d.value=!0)},{prefix:x(()=>[r(c,{name:"lock"})]),_:1},8,["modelValue"]),w(t("p",H,[...e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-exclamation-circle-fill",viewBox:"0 0 16 16"},[t("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"})],-1),b(" 8-16位, 英文/数字/符号 ",-1)])],512),[[y,!n(L).isLegal]])])]),r(V,{loading:n(p),text:"注册",type:"primary",onClick:T},null,8,["loading"]),t("div",K,[t("div",q,[(v(!0),m(E,null,M(n(S),a=>(v(),m("span",{key:a.text,onClick:a.action},F(a.text),9,G))),128))]),e[7]||(e[7]=t("div",{class:"thirdPartyLogin"},[t("span",null,"绑定注册")],-1))])])])}}}),Z=j(Q,[["__scopeId","data-v-1b00bdc9"]]);export{Z as default};
