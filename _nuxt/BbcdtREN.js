import{d as B,ab as E,r as i,a as _,K as M,ak as u,y as g,A as t,e as c,f as w,I as x,a7 as k,E as o,v as y,J as b,F as P,B as F,al as I,z as v,M as N,G as O,ae as j,_ as $}from"#entry";import{E as D}from"./BlcZ-okd.js";const J={class:"login-page"},R={action:"#",method:"post",class:"formContent"},U={class:"input_place"},z={class:"input_alert"},G={class:"input_place"},H={class:"input_alert"},K={for:"rememberLoginAcc",class:"remember"},q=["checked"],Q={class:"loginSelect"},W={class:"contactTryPlay"},X=["onClick"],Y=B({__name:"login",setup(Z){const n=E(),L=i(!0),a=i(""),l=i(""),d=i(!1),p=i(!1),A=_(()=>d.value?n.checkAcc(a.value):{type:0,isLegal:!0}),T=_(()=>p.value?n.checkPaw(l.value):{isLegal:!0}),m=i(!1),C=M([{text:"联系客服",action:()=>window.open("https://t.me/mmisharkk","_blank","noopener,noreferrer")},{text:"免费试玩",action:()=>u({message:"功能维护中",icon:"warning"})},{text:"忘记密码",action:()=>u({message:"重新注册吧",icon:"warning"})}]);async function V(){if(d.value=p.value=!0,n.checkAcc(a.value).isLegal&&n.checkPaw(l.value).isLegal){console.log(n.checkAcc(a.value)),m.value=!0;const h={username:a.value,password:l.value};try{const e=await fetch("https://hmajax.itheima.net/api/login",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(h)}),r=await e.json();if(!e.ok)throw new Error(r.message);u({message:"登陆成功",icon:"checked"}),n.loginSucess(a.value),j("/")}catch(e){u({message:e.message,icon:"clear"})}finally{m.value=!1}}}return(h,e)=>{const r=N,f=D,S=I;return v(),g("div",J,[t("main",null,[t("form",R,[e[7]||(e[7]=t("p",{class:"loginTypeText"},"支持邮箱/账号登陆",-1)),t("div",U,[c(f,{modelValue:o(a),"onUpdate:modelValue":e[0]||(e[0]=s=>k(a)?a.value=s:null),placeholder:"请输入邮箱/账号",maxlength:16,clearable:"",onFocusOnce:e[1]||(e[1]=s=>d.value=!0)},{prefix:x(()=>[c(r,{name:"contact"})]),_:1},8,["modelValue"]),w(t("p",z,[...e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-exclamation-circle-fill",viewBox:"0 0 16 16"},[t("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"})],-1),b(" 请输入邮箱/帐号 ",-1)])],512),[[y,!o(A).isLegal]])]),t("div",G,[c(f,{modelValue:o(l),"onUpdate:modelValue":e[2]||(e[2]=s=>k(l)?l.value=s:null),placeholder:"请输入密码",maxlength:16,clearable:"",type:"password","show-password":"",onFocusOnce:e[3]||(e[3]=s=>p.value=!0)},{prefix:x(()=>[c(r,{name:"lock"})]),_:1},8,["modelValue"]),w(t("p",H,[...e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-exclamation-circle-fill",viewBox:"0 0 16 16"},[t("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"})],-1),b(" 8-16位, 英文/数字/符号 ",-1)])],512),[[y,!o(T).isLegal]]),t("label",K,[t("input",{type:"checkbox",checked:o(L)},null,8,q),e[6]||(e[6]=t("span",null,"记住账号/密码",-1))])])]),c(S,{loading:o(m),text:"登陆",type:"primary",onClick:V},null,8,["loading"]),t("div",Q,[t("div",W,[(v(!0),g(P,null,F(o(C),s=>(v(),g("span",{key:s.text,onClick:s.action},O(s.text),9,X))),128))]),e[8]||(e[8]=t("div",{class:"thirdPartyLogin"},[t("span",null,"绑定登陆")],-1))])])])}}}),se=$(Y,[["__scopeId","data-v-36e1b64e"]]);export{se as default};
