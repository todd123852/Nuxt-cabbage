import{a as A,a1 as B,r as i,O as _,i as P,c as d,b as t,g as r,v as w,w as x,Y as k,u as n,x as y,h as b,F as O,e as E,ab as F,o as p,s as M,t as N,a5 as R,_ as j}from"./Dpf0kvGp.js";import{E as I}from"./C_nWEGGq.js";import{s as m}from"./CjgZe-uq.js";const $={class:"loginRegistPage"},D={action:"#",method:"post",class:"formContent"},U={class:"input_place"},H={class:"input_alert"},J={class:"input_place"},Y={class:"input_alert"},q={class:"loginSelect"},z={class:"contactTryPlay"},G=["onClick"],K=A({__name:"regist",setup(Q){const l=B(),a=i(""),o=i(""),g=i(!1),v=i(!1),T=_(()=>g.value?l.checkAcc(a.value):{type:0,isLegal:!0}),C=_(()=>v.value?l.checkPaw(o.value):{isLegal:!0}),u=i(!1);async function S(){if(l.checkAcc(a.value)&&l.checkPaw(o.value)){u.value=!0;const f={username:a.value,password:o.value};try{const e=await fetch("https://hmajax.itheima.net/api/register",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(f)}),c=await e.json();if(!e.ok)throw new Error(c.message);l.loginSucess(a.value),m({message:"注册成功",icon:"checked"}),R("/")}catch(e){m({message:e.message,icon:"clear"})}finally{u.value=!1}}}const V=P([{text:"联系客服",action:()=>window.open("https://t.me/mmisharkk","_blank","noopener,noreferrer")},{text:"免费试玩",action:()=>m({message:"功能维护中",icon:"warning"})}]);return(f,e)=>{const c=M,h=I,L=F;return p(),d("div",$,[t("main",null,[t("form",D,[e[6]||(e[6]=t("p",{class:"loginTypeText"},"支持邮箱/账号注册",-1)),t("div",U,[r(h,{modelValue:n(a),"onUpdate:modelValue":e[0]||(e[0]=s=>k(a)?a.value=s:null),placeholder:"请输入邮箱/账号",minlength:4,maxlength:16,clearable:"",onFocusOnce:e[1]||(e[1]=s=>g.value=!0)},{prefix:x(()=>[r(c,{name:"contact"})]),_:1},8,["modelValue"]),w(t("p",H,[...e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-exclamation-circle-fill",viewBox:"0 0 16 16"},[t("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"})],-1),b(" 请输入邮箱/帐号 ",-1)])],512),[[y,!n(T).isLegal]])]),t("div",J,[r(h,{modelValue:n(o),"onUpdate:modelValue":e[2]||(e[2]=s=>k(o)?o.value=s:null),placeholder:"请输入密码",maxlength:16,clearable:"",onFocusOnce:e[3]||(e[3]=s=>v.value=!0)},{prefix:x(()=>[r(c,{name:"lock"})]),_:1},8,["modelValue"]),w(t("p",Y,[...e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-exclamation-circle-fill",viewBox:"0 0 16 16"},[t("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"})],-1),b(" 8-16位, 英文/数字/符号 ",-1)])],512),[[y,!n(C).isLegal]])])]),r(L,{loading:n(u),text:"注册",type:"primary",onClick:S},null,8,["loading"]),t("div",q,[t("div",z,[(p(!0),d(O,null,E(n(V),s=>(p(),d("span",{key:s.text,onClick:s.action},N(s.text),9,G))),128))]),e[7]||(e[7]=t("div",{class:"thirdPartyLogin"},[t("span",null,"绑定注册")],-1))])])])}}}),ee=j(K,[["__scopeId","data-v-418ae4b5"]]);export{ee as default};
